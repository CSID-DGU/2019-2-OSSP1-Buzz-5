{"ast":null,"code":"var _jsxFileName = \"/Users/seonyounglee/2019-2-OSSP1-Buzz-5/client/src/containers/ChatContainer.js\";\nimport React, { Component } from 'react';\nexport class ChatContainer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = () => {\n      this.props.socket.on('chat', obj => {\n        const log = this.state.messages;\n        obj.key = 'key_' + (this.state.messages.length + 1);\n        log.push(obj);\n        this.setState({\n          messages: log\n        });\n      });\n    };\n\n    this.handleChange = e => {\n      e.preventDefault();\n      const msg = e.target.value;\n      this.setState({\n        message: msg\n      });\n    };\n\n    this.handleSubmit = e => {\n      if (this.state.message == \"\") {\n        return;\n      }\n\n      this.props.socket.emit('chat', {\n        name: this.props.name,\n        msg: this.state.message,\n        timestamp: this.getTimeStamp()\n      });\n      this.setState({\n        message: \"\"\n      });\n    };\n\n    this.getTimeStamp = () => {\n      var date = new Date();\n      var formatedDate = this.changeFormat(date.getFullYear(), 4) + '-' + this.changeFormat(date.getMonth() + 1, 2) + '-' + this.changeFormat(date.getDate(), 2) + ' ' + this.changeFormat(date.getHours(), 2) + ':' + this.changeFormat(date.getMinutes(), 2) + ':' + this.changeFormat(date.getSeconds(), 2);\n      return formatedDate;\n    };\n\n    this.changeFormat = (n, digits) => {\n      var zero = '';\n      var i;\n      n = n.toString();\n\n      if (n.length < digits) {\n        for (i = 0; i < digits - n.length; i++) zero += '0';\n      }\n\n      return zero + n;\n    };\n\n    this.handleKeyPress = event => {\n      const msg = this.state.message;\n\n      if (msg != \"\" && event.key == 'Enter') {\n        this.handleSubmit();\n      }\n    };\n\n    this.scrollToBottom = () => {\n      const chat = document.getElementById(\"chatLog\");\n      chat.scrollTop = chat.scrollHeight;\n    };\n\n    this.state = {\n      message: \"\",\n      messages: []\n    };\n  }\n\n  render() {\n    const messages = this.state.messages.map(e => React.createElement(\"div\", {\n      key: e.key,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, e.name, \"\\xA0\"), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, e.msg, \"\\xA0\"), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, e.timestamp, \"\\xA0\")));\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row-xl-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, messages), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row-xl-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      className: \"form-control\",\n      placeholder: \"Message...\",\n      name: \"chat\",\n      type: \"message\",\n      value: this.state.message,\n      onChange: this.handleChange,\n      onKeyPress: this.handleKeyPress,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"input-group-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn btn-default\",\n      type: \"submit\",\n      onClick: this.handleSubmit,\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-send-o\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    })))))));\n  }\n\n}\nexport default ChatContainer;","map":{"version":3,"sources":["/Users/seonyounglee/2019-2-OSSP1-Buzz-5/client/src/containers/ChatContainer.js"],"names":["React","Component","ChatContainer","constructor","props","componentDidMount","socket","on","obj","log","state","messages","key","length","push","setState","handleChange","e","preventDefault","msg","target","value","message","handleSubmit","emit","name","timestamp","getTimeStamp","date","Date","formatedDate","changeFormat","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","n","digits","zero","i","toString","handleKeyPress","event","scrollToBottom","chat","document","getElementById","scrollTop","scrollHeight","render","map"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\nexport class ChatContainer extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      message: \"\",\n      messages: [],\n    }\n  }\n\n  componentDidMount = () => {\n    this.props.socket.on('chat',  (obj) => {\n      const log = this.state.messages\n      obj.key = 'key_' + (this.state.messages.length + 1)\n      log.push(obj)\n      this.setState({messages: log})\n    })\n  }\n\n  handleChange = e => {\n    e.preventDefault();\n    const msg = e.target.value;\n    this.setState({\n      message: msg,\n    })\n  }\n\n  handleSubmit = e => {\n    if(this.state.message == \"\") {\n      return\n    }\n\n    this.props.socket.emit('chat', {\n      name: this.props.name, \n      msg: this.state.message,\n      timestamp: this.getTimeStamp()\n    });\n\n    this.setState({\n      message: \"\"\n    })\n  }\n\n  getTimeStamp = () => {\n    var date = new Date()\n    var formatedDate = \n      this.changeFormat(date.getFullYear(), 4) + '-' +\n      this.changeFormat(date.getMonth() + 1, 2) + '-' +\n      this.changeFormat(date.getDate(), 2) + ' ' +\n  \n      this.changeFormat(date.getHours(), 2) + ':' +\n      this.changeFormat(date.getMinutes(), 2) + ':' +\n      this.changeFormat(date.getSeconds(), 2);\n  \n    return formatedDate;\n  }\n\n   changeFormat = (n, digits) => {\n    var zero = '';\n    var i;\n    n = n.toString();\n\n    if (n.length < digits) {\n      for (i=0; i<digits-n.length; i++)\n        zero += '0';\n    }\n    return zero + n;\n  }\n\n  handleKeyPress = event => {\n    const msg = this.state.message;\n    if(msg != \"\" && event.key == 'Enter') {\n      this.handleSubmit()\n    }\n  }\n\n  scrollToBottom = () => {\n    const chat = document.getElementById(\"chatLog\");\n    chat.scrollTop = chat.scrollHeight;\n  }\n\n  render() {\n    const messages = this.state.messages.map(e => (\n      <div key={e.key}>\n        <span>{e.name}&nbsp;</span>\n        <span>{e.msg}&nbsp;</span>\n        <span>{e.timestamp}&nbsp;</span>\n      </div>\n    ))\n    return (\n      <div>\n        <div className=\"col\">\n          <div className=\"row-xl-10\">\n            {messages}\n          </div>\n          <hr/>\n          <div className=\"row-xl-2\">\n            <div className=\"input-group\">\n              <input className=\"form-control\" \n                    placeholder=\"Message...\" \n                    name=\"chat\"\n                    type=\"message\" \n                    value={this.state.message} \n                    onChange={this.handleChange}\n                    onKeyPress={this.handleKeyPress} />\n              <div className=\"input-group-btn\">\n                <button className=\"btn btn-default\" \n                        type=\"submit\"\n                        onClick={this.handleSubmit} \n                        onSubmit={this.handleSubmit}>\n                  <i className=\"fa fa-send-o\"/>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default ChatContainer\n"]},"metadata":{},"sourceType":"module"}